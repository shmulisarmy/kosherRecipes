{% extends "base.html" %}

{% block css %}
<style>
    :root {
        --radius: 10px;
        --indent: 30px;
    }

    @media screen and (min-width: 1200px) {
        :root {
            --left-width: 6vw;
            --radius: 10px;
            --indent: 30px;

        }




        .middle {
            position: relative;
        }

        main {
            margin-left: var(--left-width);
        }

        .left {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            height: 100vh;
            width: var(--left-width);

            .inner-content {
                position: sticky;
                top: 0;
            }
        }
    }

    .left {
        display: none;
    }



    article {
        text-align: center;
        background-color: lightgrey;
        padding: 40px;
        border-radius: var(--radius);
        margin: var(--indent);

        h1 {
            font-size: xx-large;
        }

        .x {
            display: flex;
        }

        .flex {

            /* display: flex; */
            img,
            .text {
                flex-basis: 50%;
                margin: 10px;
                padding: 10px;
            }
        }
    }

    @media screen and (min-width: 800px) {
        article {
            border-radius: var(--radius);

            .flex {
                display: flex;
            }
        }

    }

    .recipe-container {
        margin: 20px;
        padding: 20px;
        border: solid 1px lightgrey;
        display: flex;
        /* justify-content: center; */
        gap: 10px;
        background-color: var(--background-color);
        color: var(--color);

        overflow-x: scroll;

    }

    .recipe {
        margin: 4px;
        padding: 10px;
        background-color: var(--background-color);
        color: var(--color);
        transition: color .4s;
        flex-basis: 280px !important;
        border: solid 1px lightgrey;
        border-top-left-radius: var(--radius);
        border-top-right-radius: var(--radius);


        img {
            width: 240px;
            aspect-ratio: 16/9;
            object-fit: cover;
            border-top-left-radius: var(--radius);
            border-top-right-radius: var(--radius);
        }
    }
</style>


{% endblock %}


{% block content %}


<div class="middle">




    <div class="left">
        <div class="inner-content">

            <p>Discover delicious recipes and enjoy cooking!</p>
            <details>
                <summary>index</summary>
                <ul>
                    {% for recipe in recipes %}
                    <li>{{ recipe[recipe_columns.index("name")] }}</li>
                    {% endfor %}
                </ul>
            </details>
        </div>
    </div>


    <main>


        <div class="recipe-container">
            {% for recipe in recipes %}
            <div hx-on="intersect:console.log('intersected')" tabindex="0" class="recipe">
                <img src="/static/recipe_images/{{ loop.index % recipe_image_count + 1 }}.png" alt="{{ recipe.name }}">
                <h2>{{ recipe[recipe_columns.index("name")] }}</h2>
                <p>Time to make: {{ recipe[recipe_columns.index("time_to_make")] }}</p>
                <ul>
                    {% for ingredient, amount in recipe[recipe_columns.index("ingredients")].items() %}
                    <li>{{ ingredient }}: {{ amount }}</li>
                    {% endfor %}
                </ul>
                <a href="/recipe/{{ recipe[recipe_columns.index('id')] }}">View</a>
            </div>
            {% endfor %}
        </div>


        <article>
            <h1>More recipes</h1>
            <div class="flex">
                <div class="text">
                    <h3>Lorem ipsum</h3>
                    <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Expedita eligendi totam cupiditate
                        minima,
                        suscipit atque quam officiis similique voluptates possimus tempora eius quod in dolor blanditiis
                        doloremque corrupti repellat corporis.</p>
                </div>
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcScwNOXbJ19V2Y8Sm38E08m60OTzr7e0nwosQ&s"
                    alt="">
            </div>
        </article>

        <div class="recipe-container">
            {% for recipe in recipes %}
            <div hx-on="intersect:console.log('intersected')" tabindex="0" class="recipe">
                <img src="/static/recipe_images/{{ loop.index % recipe_image_count + 1 }}.png" alt="{{ recipe.name }}">
                <h2>{{ recipe[recipe_columns.index("name")] }}</h2>
                <p>Time to make: {{ recipe[recipe_columns.index("time_to_make")] }}</p>
                <ul>
                    {% for ingredient, amount in recipe[recipe_columns.index("ingredients")].items() %}
                    <li>{{ ingredient }}: {{ amount }}</li>
                    {% endfor %}
                </ul>
                <a href="/recipe/{{ recipe[recipe_columns.index('id')] }}">View</a>
            </div>
            {% endfor %}
        </div>

        <article>
            <h1>More recipes</h1>
            <div class="flex">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcScwNOXbJ19V2Y8Sm38E08m60OTzr7e0nwosQ&s"
                    alt="">
                <div class="text">
                    <h3>Lorem ipsum</h3>
                    <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Expedita eligendi totam cupiditate
                        minima,
                        suscipit atque quam officiis similique voluptates possimus tempora eius quod in dolor blanditiis
                        doloremque corrupti repellat corporis.</p>
                </div>
            </div>
        </article>


        <div class="recipe-container">
            {% for recipe in recipes %}
            <div hx-on="intersect:console.log('intersected')" tabindex="0" class="recipe">
                <img src="/static/recipe_images/{{ loop.index % recipe_image_count + 1 }}.png" alt="{{ recipe.name }}">
                <h2>{{ recipe[recipe_columns.index("name")] }}</h2>
                <p>Time to make: {{ recipe[recipe_columns.index("time_to_make")] }}</p>
                <ul>
                    {% for ingredient, amount in recipe[recipe_columns.index("ingredients")].items() %}
                    <li>{{ ingredient }}: {{ amount }}</li>
                    {% endfor %}
                </ul>
                <a href="/recipe/{{ recipe[recipe_columns.index('id')] }}">View</a>
            </div>
            {% endfor %}
        </div>

    </main>

</div>





{% endblock %}